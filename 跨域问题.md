## 跨域问题

**为什么需要解决跨域？**

因为浏览器的同源策略。 浏览器处于对安全方面的考虑，不允许跨域调用页面的对象。

**简单来说：只有当协议，域名，端口相同的时候才算同一个域名，否则均认为需要做跨域的处理**


临时补充一下域名的知识

* 一级域名：又叫顶级域名，是域名的最后一个部分，即是 域名最后一点之后的字母
* 二级域名：最靠近顶级域名左侧的字段 如 http://zhwikipedia.org 这个 **wikipedia**就是二级域名

跨域方法：
  分为iframe的跨域和纯粹的跨全域请求
  
#### 跨全域
1. JSONP： JSON with Padding， 可以用于解决主流浏览器的跨域数据访问的问题
   Web页面上调用js文件不受同源策略影响，所以通过Script便签可以进行跨域请求
   1. 首先前端先设置好回调函数，并将回调函数作为url的参数
   2. 服务端接收到请求后，通过该参数获得回调函数名，并将数据放在参数中将其返回
   3. 收到的结果后因为是script标签，所以浏览器会当做是脚本进行运行，从而达到跨域获取数据的目的

   **优点**: 
   
   * 不像XMLHttpRequest对象实现Ajax请求那样受到同源策略的限制
   * 兼容性很好，在古老的浏览器也能很好的运行
   * 不需要XMLHttpRequest或ActiveX的支持；并且在请求完毕后可以通过调用callback的方式回传结果
  **缺点**
  
  * 它只支持GET请求而不支持POST等其他类型的HTTP请求
  * 它只能支持跨域HTTP请求这种情况，不能解决不同域的两个页面或iframe之间进行数据通信的问题
2. CORS：是一个W3C标准，全称是“跨域资源共享(Cross-origin resource sharing)”它允许浏览器向跨源服务器，发出XMLHttpRequest请求，从而客服了ajax只能同源使用得让限制
   
   * CORS需要浏览器和服务器同事支持才可以生效。通信的关键是服务器
   * 服务器要设置响应投中的Access-Control-Allow-Origin，该值要与请求头中的Origin一致才能生效
   
   **优缺点** 
   
   * 使用简单方便，更为安全
   * 支持POST请求方式
   * CORS是一种新型的跨域问题的解决方案，存在兼容问题，仅支持IE10以上

3. Server Proxy: 服务器代理，当你需要跨域请求操作室，发送请求给后端，让后端帮你代为请求，然后后端将获取到的结果发送给你

#### 通过iframe跨域与其他页面通信的方式
1. location.hash
   
   **缺点**：
   
   * 数据直接暴露在了url中
   * 数据容量和类型都有限等等
2. window.name
3. postMessage： 是HTML5新增加的一项功能，跨文档消息传输(Cross Document Messaging)
4. document.domain
5. flash